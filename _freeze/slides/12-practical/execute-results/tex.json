{
  "hash": "f69a9676f762f48babe7ed9bfb0685ea",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"ETC3550/ETC5550 Applied&nbsp;forecasting\"\nauthor: \"Ch12. Some practical issues\"\ninstitute: \"OTexts.org/fpp3/\"\npdf-engine: pdflatex\nfig-width: 7.5\nfig-height: 3.5\nformat:\n  beamer:\n    theme: monash\n    aspectratio: 169\n    fontsize: 14pt\n    section-titles: false\n    knitr:\n      opts_chunk:\n        dev: \"cairo_pdf\"\ninclude-in-header: header.tex\nexecute:\n  echo: false\n  message: false\n  warning: false\n---\n\n\n\n\n# Models for different frequencies\n\n## Models for different frequencies\n\n### Models for annual data\n\n * ETS, ARIMA, Dynamic regression\n\\pause\n\n### Models for quarterly data\n\n * ETS, ARIMA/SARIMA, Dynamic regression, Dynamic harmonic regression, STL+ETS, STL+ARIMA\n\\pause\n\n### Models for monthly data\n\n * ETS, ARIMA/SARIMA, Dynamic regression, Dynamic harmonic regression, STL+ETS, STL+ARIMA\n\n## Models for different frequencies\n\n### Models for weekly data\n\n * ARIMA/SARIMA, Dynamic regression, Dynamic harmonic regression, STL+ETS, STL+ARIMA, TBATS\n\\pause\n\n### Models for daily, hourly and other sub-daily data\n\n * ARIMA/SARIMA, Dynamic regression, Dynamic harmonic regression, STL+ETS, STL+ARIMA, TBATS\n\n# Ensuring forecasts stay within limits\n\n## Positive forecasts\n\\fontsize{9}{9}\\sf\n\n\n::: {.cell}\n\n```{.r .cell-code}\nrecent_prices <- prices |> filter(!is.na(eggs))\nrecent_prices |>\n  model(ETS(log(eggs) ~ error(\"A\") + trend(\"A\") + season(\"N\"))) |>\n  forecast(h = 50) |>\n  autoplot(recent_prices)\n```\n\n::: {.cell-output-display}\n![](12-practical_files/figure-beamer/unnamed-chunk-1-1.pdf)\n:::\n:::\n\n\n# Forecast combinations\n\n## Forecast combinations\n\n### Clemen (1989)\n\"The results have been virtually unanimous: combining multiple forecasts leads to increased forecast accuracy. \\dots In many cases one can make dramatic performance improvements by simply averaging the forecasts.\"\n\n## Forecast combinations\n\\fontsize{9}{10}\\sf\\vspace*{-0.2cm}\n\n\n::: {.cell}\n\n```{.r .cell-code}\naus_cafe <- aus_retail |>\n  filter(Industry == \"Cafes, restaurants and catering services\") |>\n  summarise(Turnover = sum(Turnover))\nfc <- aus_cafe |>\n  filter(Month <= yearmonth(\"2013 Sep\")) |>\n  model(\n    ETS = ETS(Turnover),\n    ARIMA = ARIMA(Turnover)\n  ) |>\n  mutate(\n    Combination = (ETS + ARIMA) / 2\n  ) |>\n  forecast(h = \"5 years\")\n```\n:::\n\n\n## Forecast combinations\n\\fontsize{10}{10}\\sf\\vspace*{-0.2cm}\n\n\n::: {.cell}\n\n```{.r .cell-code}\nfc |> autoplot(aus_cafe, level = NULL) +\n  labs(\n    x = \"Year\", y = \"$ billion\",\n    title = \"Australian monthly expenditure on eating out\"\n  )\n```\n\n::: {.cell-output-display}\n![](12-practical_files/figure-beamer/combineplot-1.pdf)\n:::\n:::\n\n\n## Forecast combinations\n\\fontsize{10}{15}\\sf\n\n::: {.cell}\n\n```{.r .cell-code}\nfc |> accuracy(aus_cafe)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 3 x 10\n  .model      .type    ME  RMSE   MAE    MPE   MAPE   MASE  RMSSE   ACF1\n  <chr>       <chr> <dbl> <dbl> <dbl>  <dbl>  <dbl>  <dbl>  <dbl>  <dbl>\n1 ARIMA       Test   NaN   NaN   NaN  NaN    NaN    NaN    NaN    NA    \n2 Combination Test   NaN   NaN   NaN  NaN    NaN    NaN    NaN    NA    \n3 ETS         Test   128.  133.  128.   6.18   6.18   2.06   1.64  0.324\n```\n\n\n:::\n:::\n\n\n# Missing values\n\n## Missing values\n\\fontsize{12}{13}\\sf\n\n**Functions which can handle missing values**\n\n * `ARIMA()`\n * `TSLM()`\n * `NNETAR()`\n * `VAR()`\n * `FASSTER()`\n\n**Models which cannot handle missing values**\n\n * `ETS()`\n * `STL()`\n * `TBATS()`\n\n\\pause\n\n### What to do?\n 1. Model section of data after last missing value.\n 2. Estimate missing values with `interpolate()`.\n\n## Missing values\n\\fontsize{12}{12}\\sf\n\n::: {.cell}\n\n```{.r .cell-code}\ngold <- as_tsibble(forecast::gold)\ngold |> autoplot(value)\n```\n\n::: {.cell-output-display}\n![](12-practical_files/figure-beamer/unnamed-chunk-3-1.pdf)\n:::\n:::\n\n\n## Missing values\n\\fontsize{12}{12}\\sf\n\n::: {.cell}\n\n```{.r .cell-code}\ngold_complete <- gold |>\n  model(ARIMA(value)) |>\n  interpolate(gold)\ngold_complete |>\n  autoplot(value, colour = \"red\") +\n  autolayer(gold, value)\n```\n\n::: {.cell-output-display}\n![](12-practical_files/figure-beamer/unnamed-chunk-4-1.pdf)\n:::\n:::\n\n\n# Outliers\n\n## Outliers\n\\fontsize{11}{13}\\sf\n\n\n::: {.cell}\n\n```{.r .cell-code}\nfit <- gold |>\n  model(ARIMA(value))\naugment(fit) |>\n  mutate(stdres = .resid / sd(.resid, na.rm = TRUE)) |>\n  filter(abs(stdres) > 10)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tsibble: 2 x 7 [1]\n# Key:       .model [1]\n  .model       index value .fitted .resid .innov stdres\n  <chr>        <dbl> <dbl>   <dbl>  <dbl>  <dbl>  <dbl>\n1 ARIMA(value)   770  594.    499.   94.7   94.7   16.4\n2 ARIMA(value)   771  487.    562.  -74.8  -74.8  -12.9\n```\n\n\n:::\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": null,
    "postProcess": false
  }
}